var canvas,stage,exportRoot;var LANG="en";var urlParams={};function forceES(){LANG="es";init()}function init(){storytext=(LANG=="en")?storytext_en:storytext_es;createjs.MotionGuidePlugin.install();canvas=document.getElementById("canvas");images=images||{};sounds=[];var a=new createjs.LoadQueue(false);a.installPlugin(createjs.Sound);a.addEventListener("fileload",handleFileLoad);a.addEventListener("complete",loadSounds);a.loadManifest(lib.properties.manifest)}function handleFileLoad(a){if(a.item.type=="image"){images[a.item.id]=a.result}}function loadSounds(){sndch=createjs.Sound;sndch_fx=createjs.Sound;sndQ=new createjs.LoadQueue(false);sndQ.addEventListener("complete",sndQ_handleComplete);sndQ.addEventListener("fileload",sndQ_handleFileLoad);createjs.Sound.registerSound("snd_"+LANG+"/screen1.m4a","screen1");createjs.Sound.registerSound("snd_"+LANG+"/screen2.m4a","screen2");createjs.Sound.registerSound("snd_"+LANG+"/screen3.m4a","screen3");createjs.Sound.registerSound("snd_"+LANG+"/screen4.m4a","screen4");createjs.Sound.registerSound("snd_"+LANG+"/screen5.m4a","screen5");createjs.Sound.registerSound("snd_"+LANG+"/screen6.m4a","screen6");createjs.Sound.registerSound("snd_"+LANG+"/screen7.m4a","screen7");createjs.Sound.registerSound("snd_"+LANG+"/screen75.m4a","screen75");createjs.Sound.registerSound("snd_"+LANG+"/screen8.m4a","screen8");createjs.Sound.registerSound("snd_"+LANG+"/screen9.m4a","screen9");createjs.Sound.registerSound("snd_"+LANG+"/screen10.m4a","screen10");createjs.Sound.registerSound("snd_"+LANG+"/screen11.m4a","screen11");createjs.Sound.registerSound("snd_sfx/snd_eating.m4a","snd_eating");createjs.Sound.registerSound("snd_sfx/snd_pancreastries.m4a","snd_pancreastries");createjs.Sound.registerSound("snd_sfx/snd_glucoseappear.m4a","snd_glucoseappear");createjs.Sound.registerSound("snd_sfx/snd_gimeet.m4a","snd_gimeet");createjs.Sound.registerSound("snd_sfx/snd_insulininjection.m4a","snd_insulininjection");createjs.Sound.registerSound("snd_sfx/snd_swoosh.m4a","snd_swoosh");createjs.Sound.registerSound("snd_sfx/snd_lookinside.m4a","snd_lookinside");createjs.Sound.registerSound("snd_sfx/snd_insulinappear.m4a","snd_insulinappear");createjs.Sound.registerSound("snd_sfx/snd_buttonclick.m4a","sfx_btnclick");sndQ.load()}function sndQ_handleFileLoad(a){sounds[a.item.id]=a.result}function sndQ_handleComplete(a){loadingAllDone()}function loadingAllDone(){exportRoot=new lib.basilBolus();stage=new createjs.Stage(canvas);stage.mouseMoveOutside=true;isTouch=createjs.Touch.isSupported();createjs.Touch.enable(stage,true,false);stage.addChild(exportRoot);stage.update();createjs.Ticker.setFPS(lib.properties.fps);createjs.Ticker.addEventListener("tick",stage);stage.addEventListener("mousedown",stage_mousedown);$("#storytxt").on("mousedown",storytxt_mousedown)}function storytxt_mousedown(a){$("#storytxt").removeClass("white");$("#storytxt").addClass("default")}function stage_mousedown(a){$("#storytxt").removeClass("default");$("#storytxt").addClass("white")}function playSound(b,a){sndch=createjs.Sound.play(b)}function stopSound(){sndch.stop()}function playSfx(a){sndch_fx=createjs.Sound.play(a,{volume:0.4})}function stopSfx(){sndch_fx.stop()}function addHandHover(a){}function removeHandHover(a){}function cursorPointer(a){}function cursorDefault(a){}function begin_pulseObj(a){a.startSX=a.scaleX;a.startSY=a.scaleY;createjs.Tween.get(a,{loop:true}).to({scaleX:a.scaleX*1.1,scaleY:a.scaleY*1.1},250,createjs.Ease.none).wait(250).to({scaleX:a.scaleX,scaleY:a.scaleY},250,createjs.Ease.none).wait(250)}function end_pulseObj(a){createjs.Tween.removeTweens(a);a.scaleX=a.startSX||1;a.scaleY=a.startSY||1};